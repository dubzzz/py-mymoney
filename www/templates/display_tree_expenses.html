{% extends "base.html" %}

{% block title %}My expenses{% end %}
{% block title_h1 %}My expenses{% end %}

{% block additional_css_js %}

<link rel="stylesheet" href="/static/js-tools/css/hierarchy-table.css">
<script src="/static/js-tools/js/hierarchy-table.js"></script>
<script src="/static/js/display_tree_expenses_table.js"></script>

{% end %}

{% block content %}

<div id="display-tree-expenses">
 <table id="display-tree-expenses-table" class="hierarchy-table">
    <thead>
      <tr>
        <th>Categories</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody>
      <tr><td colspan="2"><span class="glyphicon glyphicon-info-sign"></span> Please enable JavaScript to be able to see expenses</td></tr>
    </tbody>
  </table>
  <script type="text/javascript">
    var rawdata = [
      {% for expense_id, expense in expenses.items() %}
        {% for category_id, category_name in expense['categories'].items() %}
        {
          title: "{{ expense['title'] }}",
          category_id: {{ category_id }},
          date: {{ expense['date'] }},
          price: {{ expense['price'] }},
        },
        {% end %}
      {% end %}
    ];
    
    initAddExpensesTable("{{ reverse_url('xml_trees') }}", rawdata, $("#display-tree-expenses-table"));
  </script>
</div>

{% end %}
